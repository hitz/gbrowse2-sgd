#
# GBROWSE CONFIG FILE FOR S. cerevisiae
#

[GENERAL]
description = Thumbnail for S. cerevisiae from SGD
db_adaptor    = Bio::DB::GFF
db_args       = -adaptor dbi::mysqlopt 
	        -dsn     dbi:mysql:database=scgenome;host=localhost;mysql_socket=/db0/mysql/admin/sgd/mysql.sock
user          = selector
pass          = pet1Flew

aggregators = match
              coding
              processed_transcript
              tRNA{noncoding_exon/tRNA}
              rRNA{ncRNA,nc_primary_transcript/rRNA}
              snoRNA{ncRNA/snoRNA}
              snRNA{ncRNA/snRNA}

plugins = 

# Web site configuration info
stylesheet  = /gbrowse/gbrowse.css
buttons     = /gbrowse/images/buttons
tmpimages   = /gbrowse/tmp

# units
# units = R
# unit_divider = 1000000

show sources = 0
image cachetime = 120

# put key text between tracks
keystyle = between
#keystyle     = bottom
#empty_tracks = dashed
empty_tracks = key
#empty_tracks = line
#empty_tracks = suppress
#empty_tracks = dashed

# colors of the overview, detailed map and key
overview bgcolor = lightgrey
detailed bgcolor = lightgoldenrodyellow
key bgcolor      = beige
truecolor        = 0

##
# Where to link to when user clicks in detailed view
##
# If you have access to the Internet use the db.yeastgenome.org URL
# new link for BUD
link          = /cgi-bin/locus.pl?locus=$name

# If no network is available use the localhost URL
#link          = http://localhost/cgi-bin/gbrowse_details/scgenome/?name=$name

# routines to compile in advance
init_code = 
	  	sub orf_color {
			my $feature = shift;
			my $orfclass = $feature->attributes('orf_classification');
			return 'lightgrey' if ($orfclass eq "Dubious");
			return 'peachpuff' if ($orfclass eq "Uncharacterized");
			return 'red' if ($orfclass eq "Verified");
			return 'white' if ($orfclass eq "Pseudogene");
		}
		sub orf_class {
			my $feature = shift;
			my $gene = $feature->attributes('Gene');
			my $orfclass = $feature->attributes('orf_classification');
			return "$gene, $orfclass" if ( defined($gene) && defined($orfclass));
			return "$orfclass" if ( defined($orfclass) );
			return $feature->attributes('Note');
		}
		sub feat_desc {
			my $feature = shift;
			my $gene = $feature->attributes('Gene');
			my $desc = $feature->attributes('Note');
			my $orfclass = $feature->attributes('orf_classification');
			$desc =~ s/\,.*//;
			$desc =~ s/\;.*//;
			$desc =~ s/\. .*//;
                        my $rtnstr = "";
                        $rtnstr = "$gene, " if ( defined($gene) );
                        $rtnstr .= "$orfclass, " if ( defined($orfclass) );
                        $rtnstr .= "$desc" if ( defined($desc) );
			return "$rtnstr";
		}
		sub strand_color {
			shift->strand > 0 ? 'violet' : 'turquoise'
		}
		sub codontable_check {
			my $feature = shift;
			my $ref = $feature->seq_id;
			# or $feature->ref for older bioperl
			return $ref =~ /Mit/i ? 3 : 1;
		}

# what image widths to offer
image widths  = 450 640 800 1024 1600

# fine zoom to be offered -- please provide a percentage
fine zoom      = 20%

# default width of detailed view (pixels)
default width = 800
default features = Everything Clone

# max and default segment sizes for detailed view
max segment     = 1700000
default segment = 50000

# zoom levels
zoom levels    = 100 200 1000 2000 5000 10000 20000 40000 100000 200000 500000

# examples to show in the introduction
examples = chrIII
	   chrV:80,000..120,000
	   SGS1
	   RPL28

# "automatic" classes to try when an unqualified identifier is given
automatic classes = gene Sequence

header = <br>

footer = <br>

# Various places where you can insert your own HTML -- see configuration docs
html1 = 
html2 = 
html3 = 
html4 = 
html5 = 
html6 = 

[TRACK DEFAULTS]
glyph         = generic
height        = 8
bgcolor       = slateblue
fgcolor       = black
fontcolor     = black
font2color    = blue
label density = 25
bump density  = 100

##################################################################################
# the remainder of the sections configure particular tracks to show
##################################################################################

[Centro:overview]
feature        = centromere
bgcolor        = blue
glyph          = dot
fgcolor        = black
height         = 8
point          = 1

[Landmarks:overview]
feature        = region:landmark
glyph          = span
height         = 5
description    = 0
label          = 1

[Everything]
feature		= processed_transcript:SGD telomere:SGD repeat_family:SGD transposable_element:SGD repeat_region:SGD centromere:SGD ARS:SGD tRNA:SGD rRNA:SGD snoRNA:SGD snRNA:SGD
glyph          = processed_transcript
description    = 0
bgcolor        = \&orf_color

[protGenes]
feature        = processed_transcript:SGD
glyph          = processed_transcript
stranded       = 1
strand_arrow   = 1
height         = 8
thin_utr       = 1
description    = \&orf_class
bgcolor        = \&orf_color

[rnaGene]
feature        = tRNA:SGD snoRNA:SGD rRNA:SGD snRNA:SGD
fgcolor        = orange
glyph          = processed_transcript
description    = 0
bgcolor        = \&strand_color

[Structural Gene]
feature        = telomere:SGD centromere:SGD ARS:SGD repeat_family:SGD
fgcolor        = orange
glyph          = generic
description    = 0
bgcolor        = \&strand_color

[Transp]
feature        = transposable_element:SGD transposable_element_gene:SGD repeat_region:SGD
glyph          = segments
bgcolor        = yellow
fgcolor        = black
height         = 6
stranded       = 1
description    = 0

[Clone]
feature        = clone
fgcolor        = black
glyph          = generic
key            = Genomic Clones
height         = 5
description    = 0
bgcolor        = black

